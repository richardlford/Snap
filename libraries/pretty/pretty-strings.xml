<?xml version="1.0"?>
<blocks app="Snap! 6, https://snap.berkeley.edu" version="1">
  <block-definition s="multiline %'text'" type="reporter" category="operators">
    <header/>
    <code/>
    <translations>pt:o texto multilinha _&#xD;</translations>
    <inputs>
      <input type="%mlt"/>
    </inputs>
    <script>
      <block s="doReport">
        <block var="text"/>
      </block>
    </script>
  </block-definition>
  <block-definition s="substring of %'string' before %'marker'" type="reporter" category="operators">
    <comment x="0" y="0" w="175.33333333333334" collapsed="false">Reports the part of the first string up to the first instance of the second string inside it.  If the second string isn't found, reports the entire first string.</comment>
    <header/>
    <code/>
    <translations>pt:o texto de _ antes de _&#xD;</translations>
    <inputs>
      <input type="%txt"/>
      <input type="%txt"/>
    </inputs>
    <script>
      <block s="doDeclareVariables">
        <list>
          <l>index</l>
        </list>
      </block>
      <block s="doSetVar">
        <l>index</l>
        <custom-block s="position of %s in %txt">
          <block var="marker"/>
          <block var="string"/>
        </custom-block>
      </block>
      <block s="doReport">
        <block s="reportIfElse">
          <block s="reportEquals">
            <block var="index"/>
            <l>0</l>
          </block>
          <block var="string"/>
          <custom-block s="substring of %txt from position %n to position %n inclusive">
            <block var="string"/>
            <l>1</l>
            <block s="reportDifference">
              <block var="index"/>
              <l>1</l>
            </block>
          </custom-block>
        </block>
      </block>
    </script>
  </block-definition>
  <block-definition s="substring of %'string' after %'marker'" type="reporter" category="operators">
    <comment x="0" y="0" w="203.33333333333334" collapsed="false">Reports the portion of the first input string starting after the first occurrence of the second string.  If the second string isn't found in the first string, reports an empty string.</comment>
    <header/>
    <code/>
    <translations>pt:o texto de _ depois de _&#xD;</translations>
    <inputs>
      <input type="%txt"/>
      <input type="%txt"/>
    </inputs>
    <script>
      <block s="doDeclareVariables">
        <list>
          <l>index</l>
        </list>
      </block>
      <block s="doSetVar">
        <l>index</l>
        <custom-block s="position of %s in %txt">
          <block var="marker"/>
          <block var="string"/>
        </custom-block>
      </block>
      <block s="doReport">
        <block s="reportIfElse">
          <block s="reportEquals">
            <block var="index"/>
            <l>0</l>
          </block>
          <l/>
          <custom-block s="substring of %txt from position %n to position %n inclusive">
            <block var="string"/>
            <block s="reportSum">
              <block var="index"/>
              <block s="reportStringSize">
                <block var="marker"/>
              </block>
            </block>
            <l/>
          </custom-block>
        </block>
      </block>
    </script>
  </block-definition>
  <block-definition s="position of %'small' in %'large'" type="reporter" category="operators">
    <comment x="0" y="0" w="294" collapsed="false">Reports the character position (starting from 1) of the beginning of the first input string inside the second input string.&#xD;If it's not found, reports 0.</comment>
    <header/>
    <code/>
    <translations>pt:a posi&#xE7;&#xE3;o de _ em _&#xD;</translations>
    <inputs>
      <input type="%s"/>
      <input type="%txt"/>
    </inputs>
    <script>
      <block s="doReport">
        <block s="reportIfElse">
          <custom-block s="use case-independent comparison"/>
          <block s="reportApplyExtension">
            <l>txt_indexof(sub, txt)</l>
            <list>
              <custom-block s="to lower case %txt">
                <block var="small"/>
              </custom-block>
              <custom-block s="to lower case %txt">
                <block var="large"/>
              </custom-block>
            </list>
          </block>
          <block s="reportApplyExtension">
            <l>txt_indexof(sub, txt)</l>
            <list>
              <block var="small"/>
              <block var="large"/>
            </list>
          </block>
        </block>
      </block>
    </script>
  </block-definition>
  <block-definition s="use case-independent comparisons %'tf'" type="command" category="operators">
    <comment w="225.33333333333334" collapsed="false">If input is TRUE, comparisons made by functions in the string library will be case-independent (so "FOO" = "foo").  This is the default.&#xD;If input is FALSE, comparisons will be exact.</comment>
    <header/>
    <code/>
    <translations>pt:altera compara&#xE7;&#xF5;es ignorando distin&#xE7;&#xE3;o min&#xFA;sculas/mai&#xFA;sculas para _&#xD;</translations>
    <inputs>
      <input type="%b"/>
    </inputs>
    <script>
      <block s="doIfElse">
        <block s="reportNot">
          <block var="tf"/>
        </block>
        <script>
          <block s="doApplyExtension">
            <l>var_declare(scope, name)</l>
            <list>
              <l>global</l>
              <l>_case indepent</l>
            </list>
          </block>
          <block s="doApplyExtension">
            <l>var_set(name, val)</l>
            <list>
              <l>_case indepent</l>
              <block s="reportBoolean">
                <l>
                  <bool>false</bool>
                </l>
              </block>
            </list>
          </block>
        </script>
        <script>
          <block s="doApplyExtension">
            <l>var_delete(name)</l>
            <list>
              <l>_case indepent</l>
            </list>
          </block>
        </script>
      </block>
    </script>
  </block-definition>
  <block-definition s="substring of %'str' from position %'start' to position %'end' inclusive" type="reporter" category="operators">
    <comment x="0" y="0" w="297.3333333333333" collapsed="false">Reports the portion of the first input (string) starting at the position given by the second input (counting from 1, like LETTER n OF) and ending at the position given by the third input (also counting from 1).  If the third input is empty, reports the portion from the first position to the end of the string.&#xD;If a position number is negative, counts from the end backward, so -1 is the last character, -2 is the next to last, etc.</comment>
    <header/>
    <code/>
    <translations>pt:o texto de _ entre as posi&#xE7;&#xF5;es _ e _ , inclusive&#xD;</translations>
    <inputs>
      <input type="%txt"/>
      <input type="%n"/>
      <input type="%n"/>
    </inputs>
    <script>
      <block s="doReport">
        <block s="reportJoinWords">
          <block s="reportLetter">
            <block s="reportNumbers">
              <block var="start"/>
              <block s="reportIfElse">
                <block s="reportEquals">
                  <block var="end"/>
                  <l>0</l>
                </block>
                <block s="reportStringSize">
                  <block var="str"/>
                </block>
                <block var="end"/>
              </block>
            </block>
            <block var="str"/>
          </block>
        </block>
      </block>
    </script>
  </block-definition>
  <block-definition s="text %'string' contains %'marker'" type="predicate" category="operators">
    <comment x="0" y="0" w="218" collapsed="false">Reports True if the first input string contains the second input string, otherwise false.&#xD;&#xD;Comparison is case-independent by default; use USE CASE-INDEPENDENT COMPARISONS to change that.</comment>
    <header/>
    <code/>
    <translations>pt:o texto de _ antes de _&#xD;</translations>
    <inputs>
      <input type="%txt"/>
      <input type="%txt"/>
    </inputs>
    <script>
      <block s="doReport">
        <block s="reportGreaterThan">
          <custom-block s="position of %s in %txt">
            <block var="marker"/>
            <block var="string"/>
          </custom-block>
          <l>0</l>
        </block>
      </block>
    </script>
  </block-definition>
  <block-definition s="to lower case %'text'" type="reporter" category="operators">
    <comment x="0" y="0" w="275.3333333333333" collapsed="false">Reports the input text with lower case letters instead of capital letters in the input.  Uses the user's locale's rules for case conversion.</comment>
    <header/>
    <code/>
    <translations>pt:em min&#xFA;sculas _&#xD;</translations>
    <inputs>
      <input type="%txt"/>
    </inputs>
    <script>
      <block s="doReport">
        <block s="reportApplyExtension">
          <l>txt_lowercase(txt)</l>
          <list>
            <block var="text"/>
          </list>
        </block>
      </block>
    </script>
  </block-definition>
  <block-definition s="use case-independent comparison" type="predicate" category="sensing">
    <header/>
    <code/>
    <translations/>
    <inputs/>
    <script>
      <block s="doDeclareVariables">
        <list>
          <l>result</l>
        </list>
      </block>
      <block s="doApplyExtension">
        <l>err_try(cmd, catch, err)</l>
        <list>
          <block s="reifyScript">
            <script>
              <block s="doSetVar">
                <l>result</l>
                <block s="reportApplyExtension">
                  <l>var_get(name)</l>
                  <list>
                    <l>_case indepent</l>
                  </list>
                </block>
              </block>
            </script>
            <list/>
          </block>
          <block s="reifyScript">
            <script>
              <block s="doSetVar">
                <l>result</l>
                <block s="reportBoolean">
                  <l>
                    <bool>true</bool>
                  </l>
                </block>
              </block>
            </script>
            <list/>
          </block>
          <l/>
        </list>
      </block>
      <block s="doApplyExtension">
        <l>err_reset</l>
        <list/>
      </block>
      <block s="doReport">
        <block var="result"/>
      </block>
    </script>
  </block-definition>
</blocks>
